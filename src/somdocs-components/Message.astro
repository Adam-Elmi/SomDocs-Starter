---
import WarnIcon from "../icons/WarnIcon.astro";
import BulbIcon from "../icons/BulbIcon.astro";
import InfoIcon from "../icons/InfoIcon.astro";
import ErrorIcon from "../icons/ErrorIcon.astro";

const { type } = Astro.props as { type: "note" | "tip" | "warning" | "error" };

const config = {
    note: {
        icon: InfoIcon,
        title: "Note",
        containerClass:
            "bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",
        iconClass: "text-blue-600 dark:text-blue-400",
        titleClass: "text-blue-700 dark:text-blue-300",
    },
    tip: {
        icon: BulbIcon,
        title: "Tip",
        containerClass:
            "bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800",
        iconClass: "text-emerald-600 dark:text-emerald-400",
        titleClass: "text-emerald-700 dark:text-emerald-300",
    },
    warning: {
        icon: WarnIcon,
        title: "Warning",
        containerClass:
            "bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",
        iconClass: "text-amber-600 dark:text-amber-400",
        titleClass: "text-amber-700 dark:text-amber-300",
    },
    error: {
        icon: ErrorIcon,
        title: "Error",
        containerClass:
            "bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",
        iconClass: "text-red-600 dark:text-red-400",
        titleClass: "text-red-700 dark:text-red-300",
    },
};

const {
    icon: Icon,
    title,
    containerClass,
    iconClass,
    titleClass,
} = config[type] || config.note;
---

<div class={`som-message my-4 rounded-lg border px-4 py-2 ${containerClass}`}>
    <div class="flex items-center gap-2 mb-2 font-semibold">
        <span class={iconClass}>
            <Icon width="20" height="20" />
        </span>
        <span class={titleClass}>{title}</span>
    </div>
    <div
        class="message-content text-sm leading-relaxed text-slate-700 dark:text-slate-300"
    >
        <slot />
    </div>
</div>

<style is:global>
    .som-message .message-content p {
        margin-bottom: 0.5rem;
    }
    .som-message .message-content p:last-child {
        margin-bottom: 0;
    }
    .som-message .message-content ul,
    .som-message .message-content ol {
        margin-bottom: 0.5rem;
    }
</style>
